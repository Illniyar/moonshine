var moonshine = require("moonshine-core")
var settings = moonshine.settings
var logger = moonshine.logFactory()
var express = require("express")
module.exports.setup = function setupExpress(cb){
    var app = express()
    app.use(function(err, req, res, next){
        if (!err) return next()
        logger.error("uncatched exception in express",err);
        res.send(500, 'internal server error');
    });
    moonshine.registerService("server",{
        app:app,
        native:express,
        httpServer:null
    })
    cb()
}
